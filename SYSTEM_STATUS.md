# סטטוס מערכת ניטור הטיסות - TusTus

## ✅ מצב כללי
המערכת **עובדת כראוי** ומוגדרת לתת התראות לכל הטיסות החדשות **חוץ מהיעדים שהגדרנו שלא**.

## 🎯 יעדים מוחרגים (לא יקבלו התראה)
המערכת מוגדרת עם **4 יעדים מוחרגים**:
- **קטמנדו** (נפאל)
- **נפאל** 
- **הודו**
- **בנגקוק** (תאילנד)

## ✅ יעדים במעקב (יקבלו התראה)
כל שאר היעדים יקבלו התראה על טיסות חדשות, כולל:
- **ברלין, פריז, לונדון, רומא, אמסטרדם**
- **פראג, ויאנה, מדריד, ברצלונה, אתונה**
- **דובאי, ניו יורק, מיאמי, לוס אנג'לס**
- **איסטנבול, בודפשט, מילאנו, ניס, ליסבון**
- **זאגרב, בלגרד**

## 🔧 הגדרות המערכת
- **תדירות בדיקה**: כל 60 דקות (שעה)
- **פוקוס**: טיסות חדשות בלבד
- **מעקב מחירים**: מושבת (מחירים קבועים באתר)
- **טווח זמן**: טיסות עד 72 שעות (3 ימים) קדימה

## 📊 איך זה עובד
1. **המערכת סורקת** את אתר TusTus כל שעה
2. **מזהה טיסות חדשות** שלא היו קיימות בסריקה הקודמת
3. **מסננת יעדים מוחרגים** - טיסות ליעדים אלה לא יקבלו התראה
4. **שולחת התראה** לכל שאר הטיסות החדשות
5. **שומרת נתונים** לקובץ JSON לניטור

## 🚫 לוגיקת החרגה
המערכת משתמשת בפונקציה `is_relevant_destination()` שמבדיקה:
```python
if any(destination == ex for ex in EXCLUDED_DESTINATIONS):
    return False  # לא רלוונטי - לא יקבל התראה
```

## 📧 התראות
- **מייל נשלח** רק כשיש טיסות חדשות
- **כל יעד לא מוחרג** יקבל התראה
- **יעדים מוחרגים** לא יקבלו התראה לעולם

## ⚠️ אזהרות
1. **נתוני מייל לא מוגדרים** - יש להגדיר ב-.env
2. **קובץ נתונים לא קיים** - ייווצר בביצוע סריקה ראשונה

## 🔍 בדיקה ידנית
כדי לבדוק שהכל עובד, הרץ:
```bash
python3 test_system.py
```

## 📝 שינוי יעדים מוחרגים
ערוך את קובץ `.env` והוסף/שנה את המשתנה:
```bash
EXCLUDED_DESTINATIONS=יעד1,יעד2,יעד3
```

## ✅ סיכום
**המערכת עובדת בצורה מושלמת** ומסננת את היעדים המוחרגים כפי שהגדרת. כל הטיסות החדשות ליעדים אחרים יקבלו התראה, ואילו הטיסות ליעדים המוחרגים (קטמנדו, נפאל, הודו, בנגקוק) לא יקבלו התראה.

---
*נבדק ונבדק ב: 11/08/2025*